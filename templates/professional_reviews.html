{% extends "layout.html" %}

{% block title %}My Reviews{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="text-center">My Reviews</h2>

    <!-- Display the Average Rating -->
    {% if avg_rating %}
        <div class="text-center mt-3">
            <h4>Average Rating: {{ avg_rating }} / 5</h4>
        </div>
    {% else %}
        <p class="text-center mt-3">No ratings available yet.</p>
    {% endif %}

    <!-- Display the Reviews -->
    {% if reviews %}
        <table class="table table-bordered mt-4">
            <thead>
                <tr>
                    <th>Customer ID</th>
                    <th>Customer Name</th>
                    <th>Rating</th>
                    <th>Comment</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody>
                {% for review in reviews %}
                <tr>
                    <td>{{ review.customer.customer_id }}</td>
                    <td>{{ review.customer.name }}</td>
                    <td>{{ review.rating }} / 5</td>
                    <td>{{ review.comment }}</td>
                    <td>{{ review.date_created.strftime('%Y-%m-%d') }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p class="text-center mt-4">You have not received any reviews yet.</p>
    {% endif %}
</div>
{% endblock %}
